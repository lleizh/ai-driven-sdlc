# AI駆動型 SDLC フロー図

```
┌────────────────────────────────────────────────────────────────────┐
│ 1. GitHub Issue (唯一の入口)                                        │
│    - Why/What/Risk を記述                                           │
└──────────────────┬─────────────────────────────────────────────────┘
                   │
                   ▼
┌────────────────────────────────────────────────────────────────────┐
│ 2. /sdlc-init (AI が SDLC 草稿を生成)                              │
│    生成ファイル：                                                    │
│    - 00_context.md, decisions.md (PENDING), risks.md               │
│    - 10_requirements.md, 20_design.md (中/高)                      │
│    - 50_test_plan.md (中/高), 60_release_plan.md (高)             │
│    ブランチ：feature/{FID}                                          │
└──────────────────┬─────────────────────────────────────────────────┘
                   │
                   ▼
          ┌────────┴────────┐
          │  3. リスク判定   │
          └────────┬────────┘
                   │
         ┌─────────┴─────────┐
         │                   │
         ▼                   ▼
   ┌──────────┐       ┌────────────────────────────────────────┐
   │ 低リスク  │       │   中/高リスク                           │
   └─────┬────┘       └──────────┬─────────────────────────────┘
         │                       │
         │                       ▼
         │            ┌────────────────────────────────────────┐
         │            │ 4. /sdlc-pr-design                     │
         │            │    Design Review PR を作成             │
         │            │    (decisions: PENDING)                │
         │            │    Label: design-review                │
         │            └──────────┬─────────────────────────────┘
         │                       │
         │                       ▼
         │            ┌────────────────────────────────────────┐
         │            │ 5. Design Review (Peer)                │
         │            │    レビュー対象：                       │
         │            │    - Context                           │
         │            │    - Design 方向性                     │
         │            │    - Risks                             │
         │            │    目的：盲点発見                       │
         │            └──────────┬─────────────────────────────┘
         │                       │ Approve & Merge
         └───────────►           │
                     ┌───────────▼─────────────────────────────┐
                     │ 6. /sdlc-decision                       │
                     │    decisions.md を更新：                │
                     │      Status: CONFIRMED                  │
                     │    20_design.md を更新：                │
                     │      Status: FROZEN                     │
                     └───────────┬─────────────────────────────┘
                                 │
                                 ▼
                     ┌────────────────────────────────────────┐
                     │ 7. /sdlc-impl-plan (任意)              │
                     │    実装計画を生成                       │
                     │    30_implementation_plan.md           │
                     │    (推奨：中/高、必須：高)             │
                     └───────────┬─────────────────────────────┘
                                 │
                                 ▼
                     ┌────────────────────────────────────────┐
                     │ 8. /sdlc-coding                        │
                     │    develop から rebase                 │
                     │    AI がコード実装                     │
                     └───────────┬─────────────────────────────┘
                                 │
                                 ▼
                     ┌────────────────────────────────────────┐
                     │ 9. /sdlc-test                          │
                     │    50_test_plan.md に基づいて          │
                     │    テストを実行・結果レポート           │
                     └───────────┬─────────────────────────────┘
                                 │
                                 ▼
                     ┌────────────────────────────────────────┐
                     │ 10. /sdlc-check (Self-Check)           │
                     │    コードと決定の一致性確認             │
                     │    - Decisions との一致                │
                     │    - Risks の管理状況                  │
                     │    - Design からの逸脱                │
                     │    (ターミナル表示のみ)                │
                     └───────────┬─────────────────────────────┘
                                 │
                    ┌────────────┴────────────┐
                    │                         │
                    ▼ 一致                    ▼ Design Drift 発見！
         ┌────────────────────┐    ┌────────────────────────────┐
         │ 11. /sdlc-pr-code  │    │ **実装を停止**              │
         │     実装 PR 作成   │    │ Decision レイヤーに戻る     │
         └─────────┬──────────┘    └──────────┬─────────────────┘
                   │                          │
                   ▼                          ▼
                   │               ┌────────────────────────────┐
                   ▼               │ /sdlc-revise               │
         ┌────────────────────┐    │ 決定を修正：                │
         │ 12. PR Review      │    │ - decisions.md:            │
         │     (Peer)         │    │   Status → REVISED         │
         │                    │    │   新しい Decision 追記     │
         │ 決定どおりに       │    │ - risks.md 更新            │
         │ 実装されているか   │    │ - 20_design.md 更新        │
         │ 検証               │    │ - 30_impl_plan.md 更新     │
         │                    │    │ - .metadata 更新:          │
         │ 注意：この段階で   │    │   STATUS → blocked         │
         │ 設計方針を         │    │   DECISION_STATUS→revised  │
         │ 再議論しない       │    └──────────┬─────────────────┘
         └─────────┬──────────┘               │
                   │                          ▼
                   │               ┌────────────────────────────┐
                   │               │ Revision PR 作成（任意）   │
                   │               │ Label: decision-revision   │
                   │               └──────────┬─────────────────┘
                   │                          │
                   │                          ▼
                   │               ┌────────────────────────────┐
                   │               │ Decision Review (Peer)     │
                   │               │ 修正内容をレビュー          │
                   │               └──────────┬─────────────────┘
                   │                          │ Approve & Merge
                   │                          ▼
                   │               ┌────────────────────────────┐
                   │               │ /sdlc-resume               │
                   │               │ 実装を再開：                │
                   │               │ - impl_plan 更新確認       │
                   │               │ - STATUS → implementing    │
                   │               │ - develop から rebase      │
                   │               └──────────┬─────────────────┘
                   │                          │
                   │                          ▼
                   │               ┌────────────────────────────┐
                   │               │ 新しい決定に基づいて        │
                   │               │ 再実装                     │
                   │               └──────────┬─────────────────┘
                   │                          │
                   │                          └──────┐
                   │                                 │
                   ▼                                 ▼
         ┌─────────────────────────────────────────────┐
         │ 13. Merge & 完了                             │
         └─────────────────────────────────────────────┘
```
